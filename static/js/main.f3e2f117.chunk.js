(this.webpackJsonpeuropeana=this.webpackJsonpeuropeana||[]).push([[0],{154:function(t,e,i){"use strict";i.r(e);var s=i(0),a=i(4),n=i.n(a),r=(i(60),i(8),i(48)),d=i(2);const c=[188,13];class o extends s.Component{constructor(t){super(t),this.state={tags:[{id:"earth",text:"Earth"},{id:"wind",text:"Wind"},{id:"fire",text:"Fire"}],suggestions:[{id:"earth",text:"Earth"},{id:"portrait",text:"Portrait"},{id:"war",text:"War"},{id:"mountain",text:"Mountain"},{id:"tree",text:"Tree"},{id:"lake",text:"Lake"},{id:"princess",text:"Princess"},{id:"sky",text:"Sky"},{id:"river",text:"River"},{id:"dog",text:"Dog"},{id:"wolf",text:"Wolf"},{id:"forest",text:"Forest"},{id:"music",text:"Music"},{id:"sunset",text:"Sunset"},{id:"king",text:"King"},{id:"battle",text:"Battle"},{id:"pond",text:"Pond"},{id:"flower",text:"Flower"},{id:"god",text:"God"},{id:"farm",text:"Farm"},{id:"horse",text:"Horse"},{id:"figure",text:"Figure"},{id:"life",text:"Life"},{id:"landscape",text:"Landscape"},{id:"bridge",text:"Bridge"},{id:"water",text:"Water"},{id:"day",text:"Day"},{id:"man",text:"Man"},{id:"woman",text:"Woman"},{id:"people",text:"People"},{id:"family",text:"Family"},{id:"school",text:"School"},{id:"country",text:"Country"},{id:"hand",text:"Hand"},{id:"night",text:"Night"},{id:"home",text:"Home"},{id:"mother",text:"Mother"},{id:"story",text:"Story"},{id:"book",text:"Book"},{id:"house",text:"House"},{id:"father",text:"Father"},{id:"game",text:"Game"},{id:"city",text:"City"},{id:"body",text:"Body"},{id:"face",text:"Face"},{id:"party",text:"Party"},{id:"morning",text:"Morning"},{id:"girl",text:"Girl"},{id:"boy",text:"Boy"},{id:"sea",text:"Sea"},{id:"jesus",text:"Jesus"},{id:"view",text:"View"},{id:"abstract",text:"Abstract"},{id:"beach",text:"Beach"},{id:"nude",text:"Nude"},{id:"sand",text:"Sand"},{id:"moon",text:"Moon"},{id:"autumn",text:"Autumn"},{id:"spring",text:"Spring"},{id:"summer",text:"Summer"},{id:"winter",text:"Winter"},{id:"bird",text:"Bird"},{id:"festival",text:"Festival"},{id:"garden",text:"Garden"},{id:"son",text:"Son"},{id:"daughter",text:"Daughter"},{id:"dance",text:"Dance"},{id:"roman",text:"Roman"},{id:"warrior",text:"Warrior"},{id:"statue",text:"Statue"},{id:"dream",text:"Dream"},{id:"fruit",text:"Fruit"},{id:"wood",text:"Wood"},{id:"child",text:"Child"},{id:"christ",text:"Christ"},{id:"cloud",text:"Cloud"},{id:"wave",text:"Wave"},{id:"angel",text:"Angel"},{id:"scene",text:"Scene"},{id:"steet",text:"Street"},{id:"boat",text:"Boat"},{id:"ship",text:"Ship"},{id:"window",text:"Window"},{id:"balcony",text:"Balcony"},{id:"lady",text:"Lady"},{id:"saint",text:"Saint"},{id:"church",text:"Church"},{id:"ink",text:"Ink"},{id:"oil",text:"Oil"},{id:"canvas",text:"Canvas"},{id:"mourning",text:"Mourning"},{id:"panel",text:"Panel"},{id:"scroll",text:"Scroll"},{id:"rock",text:"Rock"},{id:"century",text:"Century"},{id:"light",text:"Light"},{id:"fire",text:"Fire"},{id:"magic",text:"Magic"},{id:"gold",text:"Gold"},{id:"snow",text:"Snow"},{id:"stream",text:"Stream"},{id:"silk",text:"Silk"},{id:"paint",text:"Paint"},{id:"black",text:"Black"},{id:"white",text:"White"},{id:"dragon",text:"Dragon"},{id:"wine",text:"Wine"},{id:"lion",text:"Lion"},{id:"tiger",text:"Tiger"},{id:"bear",text:"Bear"},{id:"cross",text:"Cross"},{id:"cat",text:"Cat"},{id:"wild",text:"Wild"},{id:"wind",text:"Wind"},{id:"wedding",text:"Wedding"},{id:"friend",text:"Friend"},{id:"prince",text:"Prince"},{id:"death",text:"Death"},{id:"foot",text:"Foot"},{id:"birth",text:"Birth"},{id:"devil",text:"Devil"},{id:"market",text:"Market"},{id:"brook",text:"Brook"},{id:"square",text:"Square"},{id:"fish",text:"Fish"},{id:"courtesan",text:"Courtesan"},{id:"tale",text:"Tale"},{id:"sketch",text:"Sketch"},{id:"grave",text:"Grave"},{id:"train",text:"Train"},{id:"miracle",text:"Miracle"},{id:"lamentation",text:"Lamentation"}]},this.handleDelete=this.handleDelete.bind(this),this.handleAddition=this.handleAddition.bind(this),this.handleDrag=this.handleDrag.bind(this)}setTagList(){return Array.prototype.map.call(this.state.tags,(t=>t.text)).toString()}componentDidMount(){document.querySelector(".ReactTags__tagInputField").insertAdjacentHTML("afterend",'<span class="bottom line"></span><span class="right line"></span><span class="top line"></span><span class="left line"></span>')}handleDelete(t){const{tags:e}=this.state;this.setState({tags:e.filter(((e,i)=>i!==t))},(()=>{this.props.update(this.setTagList())}))}handleAddition(t){this.setState((e=>({tags:[...e.tags,t]})),(()=>{this.props.update(this.setTagList())}))}handleDrag(t,e,i){const s=[...this.state.tags].slice();s.splice(e,1),s.splice(i,0,t),this.setState({tags:s})}render(){const{tags:t,suggestions:e}=this.state;return Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"search",children:Object(d.jsx)(r.WithContext,{tags:t,suggestions:e,handleDelete:this.handleDelete,handleAddition:this.handleAddition,handleDrag:this.handleDrag,delimiters:c,onChange:this.handleAddition,autofocus:!1})})})}}var l=i(52);class h extends s.Component{constructor(t){super(t),this.state={}}render(){return Object(d.jsx)("div",{className:"map-marker",children:Object(d.jsx)("svg",{className:"svg-icon",viewBox:"0 0 20 20",children:Object(d.jsx)("path",{d:"M17.592,8.936l-6.531-6.534c-0.593-0.631-0.751-0.245-0.751,0.056l0.002,2.999L5.427,9.075H2.491c-0.839,0-0.162,0.901-0.311,0.752l3.683,3.678l-3.081,3.108c-0.17,0.171-0.17,0.449,0,0.62c0.169,0.17,0.448,0.17,0.618,0l3.098-3.093l3.675,3.685c-0.099-0.099,0.773,0.474,0.773-0.296v-2.965l3.601-4.872l2.734-0.005C17.73,9.688,18.326,9.669,17.592,8.936 M3.534,9.904h1.906l4.659,4.66v1.906L3.534,9.904z M10.522,13.717L6.287,9.48l4.325-3.124l3.088,3.124L10.522,13.717z M14.335,8.845l-3.177-3.177V3.762l5.083,5.083H14.335z"})})})}}const x="".concat("AIzaSyBvAKE7uDQduDPY7FlEg4L3XcCtSGhkCg0");class p extends s.PureComponent{constructor(t){super(t),this.state={center:{lat:this.props.lat,lng:this.props.lng}},this.zoom=10}componentDidUpdate(t){this.props.lat!==t.lat&&this.setState({center:{lat:this.props.lat,lng:this.props.lng}})}render(){return this.state.center?Object(d.jsx)("div",{className:"map-container",children:Object(d.jsx)(l.a,{bootstrapURLKeys:{key:x},center:this.state.center,zoom:this.zoom,children:Object(d.jsx)(h,{lat:this.state.center.lat,lng:this.state.center.lng,text:"My Marker"})})}):Object(d.jsx)("div",{})}}function g(t){this.setState((e=>({page:e.page+=t})))}"".concat("eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiI3MTY1NGU3MjlhMTJkNjU5OTdiNWQ3MDE0MGFmMDkyYiIsImp0aSI6ImMxZDFiYjk1ODFkZGRmODZkYWY4N2FmMTUzZGZiZmI2ZGRlOGJmY2ZlZTU4NTJjNWFiOTdkOTI2ODM5Y2UzM2IwMTVjNmQ1YTIwNzhjOTg2IiwiaWF0IjoxNjQ5NTM4NjAzLCJuYmYiOjE2NDk1Mzg2MDMsImV4cCI6MzMyMDY0NDc0MDMsInN1YiI6IjY5NDExMjg1IiwiaXNzIjoiaHR0cHM6XC9cL21ldGEud2lraW1lZGlhLm9yZyIsInJhdGVsaW1pdCI6eyJyZXF1ZXN0c19wZXJfdW5pdCI6NTAwMCwidW5pdCI6IkhPVVIifSwic2NvcGVzIjpbImJhc2ljIl19.oBwU-HhuWRXnlG8PkyEtUU9oiZSKx2a-Pacqu9OIMecTRXFfSz3YkltTflJR13EF2LC6Orm9SlGVd00aP3PlIi9g5Mmw--qxJVo8vYJ2ddLGrJe9Xy776GJOVGLWcBNtCh5KMWKOAY0CSlqJ2BuHrLANjA28hin3ELiIeTi_6JDiB6dQ24InaCipwUCkNepXxGQup7zTV2p2CWZ1QfumMY-ytWyzktS5VqGFKVvpnzCOIS69kb_-Q-3bC2-6sX8aKmvyUfrv5BK2DHWPQUwtcKUBZilwMPrxLcvAmwSWUXrj1JObrP5YhFSFDQcuYg0cPBQd5JAXJZryBQO5mBZxIrB0G9U2DOhE7GfMwlBvSGSbt7KuISxJFRQIBoFQ6g8Q-c2DTOu-gkNMLyXv1l-ekRXCx1_9iZGXMGvLc8JVn2VfAUaoS9BB6jSbDCiD2Hqwsl_7qlvQaAFlbcbAugPctYr6iap5GTan5hAluQ7kvtFWV9HxKPZBIU9AybcWXTV0tpIF_zFFMhgL0EBEIzi78_CqSQ6M6iaPLY8QNw9K-wZJfQMq5AQjuB8aM37d9hW3XM4gcxXmDG9fRBN2zLPox7PRk76XppTvI270qWEtqPsdxHw94SyNpDQYkdvctSf9KMZQaEMXoJ2Coj6hs0npu_TvPKn8uaa51Lg0Zfx_w9k"),"".concat("art-api-react (jfitzcode@gmail.com)");class m extends s.Component{constructor(t){super(t),this.state={page:-1},this.geonames={},this.paginate=g.bind(this)}componentDidUpdate(t){this.props.city!==t.city&&this.getWikiData(this.props.city)}async getWikiData(t){const e=new Headers;e.append("Api-User-Agent","Example/1.0"),e.append("Origin","http://localhost:3000/Art-API-React");let i=t.replace(/ \(.*/g,"").replace(/\?/g,"");i=i.split(",")[0],console.log("city: ".concat(i));let s="https://en.wikipedia.org/w/api.php?action=query&format=json&origin=*&list=geosearch&gspage=".concat(i,"&gsradius=10000&gslimit=10");(await fetch(s,{method:"GET",headers:e})).json().then((t=>{this.geonames=t.query.geosearch,console.log("this.geonames"),console.dir(this.geonames),this.setState({page:0})})).catch(console.error)}componentDidMount(){this.getWikiData(this.props.city)}render(){return this.geonames&&this.geonames[this.state.page]?(console.dir(this.geonames),Object(d.jsxs)("div",{className:"map-wiki flx-ctr wrap",children:[Object(d.jsxs)("div",{className:"wiki",children:[Object(d.jsxs)("div",{className:"wiki__results",children:[Object(d.jsxs)("span",{className:"label__title row",children:["Wikipedia results for ",this.props.city,":"]}),Object(d.jsx)("span",{className:"label__title row",children:this.geonames[this.state.page].title}),this.geonames[this.state.page].description,Object(d.jsx)("br",{}),Object(d.jsxs)("a",{className:"wiki__link row",href:"https://".concat(this.geonames[this.state.page].wikipediaUrl),children:[this.geonames[this.state.page].title," on wikipedia"]})]}),Object(d.jsxs)("div",{className:"page",children:[this.state.page+1," of ",this.geonames.length,Object(d.jsx)("br",{}),Object(d.jsx)("button",{className:"prev",onClick:()=>this.paginate(-1),disabled:0===this.state.page,children:"previous"})," | ",Object(d.jsx)("button",{className:"next",onClick:()=>this.paginate(1),disabled:this.state.page===this.geonames.length-1,children:"next"})]})]}),Object(d.jsx)("div",{className:"map",children:Object(d.jsx)(p,{lat:this.geonames[this.state.page].lat,lng:this.geonames[this.state.page].lon})})]})):Object(d.jsx)("div",{className:"map-wiki flx-ctr wrap",children:Object(d.jsx)("div",{className:"wiki",children:Object(d.jsx)("div",{children:Object(d.jsx)("svg",{className:"loading",viewBox:"25 25 50 50",children:Object(d.jsx)("circle",{cx:"50",cy:"50",r:"20"})})})})})}}const u="".concat("8e5a3900-d2f8-11e8-8958-d16e90e2bdfe");class j extends s.Component{constructor(t){super(t),this.state={page:-1,returnError:!1},this.records={},this.paginate=g.bind(this),this.setCity=this.setCity.bind(this)}componentDidMount(){this.fetchPaintingData()}componentDidUpdate(t){this.props.title!==t.title&&this.setState({page:0},this.fetchPaintingData())}getCssValuePrefix(){let t="";const e=["-o-","-ms-","-moz-","-webkit-"];let i=document.createElement("div");for(var s=0;s<e.length;s++)i.style.background=e[s]+"linear-gradient(#000000, #ffffff)",i.style.background&&(t=e[s]);return i=null,this.setStyle(t)}setStyle(t){const e=this.records[this.state.page].colors;let i="";for(let s=e.length;s--;)i+=e[s].color,i+=0===s?")":", ";document.body.style.background="radial-gradient(circle at bottom right, ".concat(i)}objToQueryString(t){const e=[];for(const i in t)e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")}queryString(){return this.objToQueryString({apikey:u,title:this.props.title,classification:"Paintings",hasimage:1,q:"imagepermissionlevel:0",person:"any",sort:"random",color:"any"})}fetchPaintingData(){fetch("https://api.harvardartmuseums.org/object?".concat(this.queryString()),{method:"GET"}).then((t=>t.json())).then((t=>{this.records=t.records,0===this.records.length?this.setState({returnError:!0}):this.setState({page:0})})).catch((t=>{this.setState({returnError:!0}),console.log(t)}))}setCity(){const t=this.records[this.state.page].people[0].birthplace;if(t)return t.length>23?t.split(" ").pop():t;if(this.records[this.state.page].culture)return this.records[this.state.page].culture;{const t=this.records[this.state.page].division;return t.substr(0,t.indexOf(" "))}}render(){if(this.records[this.state.page])return this.getCssValuePrefix(),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"render-coontainer",children:Object(d.jsx)("div",{className:"painting flx-ctr",children:Object(d.jsxs)("div",{className:"painting__frame flx-ctr",children:[Object(d.jsx)("span",{className:"heading",children:this.records[this.state.page].title}),Object(d.jsx)("div",{className:"frame__cell left",children:Object(d.jsx)("img",{className:"painting__image",src:this.records[this.state.page].primaryimageurl,alt:"image of "+this.records[this.state.page].title})}),Object(d.jsxs)("div",{className:"frame__cell right",children:[Object(d.jsxs)("div",{className:"painting__label",children:[Object(d.jsx)("span",{className:"label__title row",children:this.records[this.state.page].title}),Object(d.jsx)("span",{className:"label__artist row",children:this.records[this.state.page].people[0].name}),Object(d.jsx)("span",{className:"label__region row",children:this.setCity()}),Object(d.jsx)("span",{className:"label__dated row",children:this.records[this.state.page].dated}),Object(d.jsx)("span",{className:"label__period row",children:this.records[this.state.page].period}),Object(d.jsx)("span",{className:"label__medium row",children:this.records[this.state.page].medium})]}),Object(d.jsxs)("div",{className:"painting__paging page",children:[this.state.page+1," of ",this.records.length,Object(d.jsx)("br",{}),Object(d.jsx)("button",{className:"prev",onClick:()=>this.paginate(-1),disabled:0===this.state.page,children:"previous"})," | ",Object(d.jsx)("button",{className:"next",onClick:()=>this.paginate(1),disabled:this.state.page===this.records.length-1,children:"next"})]})]})]})})}),Object(d.jsx)(m,{city:this.setCity(),update:this.updateLatLng})]});{let t=this.state.returnError;return Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"render-coontainer",children:t?Object(d.jsxs)("div",{className:"search-error",children:["ERROR: ",this.props.title," did not return any results"]}):Object(d.jsx)("div",{className:"painting flx-ctr",children:Object(d.jsx)("div",{children:Object(d.jsx)("svg",{className:"loading",viewBox:"25 25 50 50",children:Object(d.jsx)("circle",{cx:"50",cy:"50",r:"20"})})})})})})}}}class b extends s.PureComponent{constructor(t){super(t),this.state={title:"earth, wind, fire"},this.updateTitle=this.updateTitle.bind(this)}updateTitle(t){this.setState({title:t})}render(){return Object(d.jsxs)("div",{id:"App",className:"App",children:[Object(d.jsx)(o,{update:this.updateTitle}),Object(d.jsx)(j,{title:this.state.title})]})}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(Object(d.jsx)(b,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((t=>{t.unregister()}))},60:function(t,e,i){},8:function(t,e,i){}},[[154,1,2]]]);
//# sourceMappingURL=main.f3e2f117.chunk.js.map